(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{275:function(e,t,a){e.exports=a.p+"assets/img/cs-stuck.bddc4a2d.jpg"},276:function(e,t,a){e.exports=a.p+"assets/img/ramrod.55591fc5.jpg"},384:function(e,t,a){e.exports=a.p+"assets/img/rtc-error.d53fdc66.jpg"},385:function(e,t,a){e.exports=a.p+"assets/img/acpi-path.e72cc3e9.png"},386:function(e,t,a){e.exports=a.p+"assets/img/onscreen-panic.e722ab0d.png"},387:function(e,t,a){e.exports=a.p+"assets/img/apic-panic.871e7d3d.png"},578:function(e,t,a){"use strict";a.r(t);var r=a(10),i=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"opencore-and-macos-11-big-sur"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#opencore-and-macos-11-big-sur"}},[e._v("#")]),e._v(" OpenCore and macOS 11: Big Sur")]),e._v(" "),t("p",[e._v("It's that time of year again and with it, and a new macOS beta has been dropped. Here's all the info you need to get started.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("Reminder")]),e._v(" "),t("p",[t("strong",[e._v("This page will be a small discussion on exactly what you need to prepare for Big Sur, a more in depth look into what's changed on Big Sur can be found here:")])]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://sumingyd.github.io/hackintosh/updates/2020/11/12/bigsur-new.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("What's new in macOS 11, Big Sur!"),t("OutboundLink")],1)])])]),e._v(" "),t("h2",{attrs:{id:"table-of-contents"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#table-of-contents"}},[e._v("#")]),e._v(" Table of Contents")]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#table-of-contents"}},[e._v("Table of Contents")])]),t("li",[t("a",{attrs:{href:"#prerequisites"}},[e._v("Prerequisites")]),t("ul",[t("li",[t("a",{attrs:{href:"#a-supported-smbios"}},[e._v("A supported SMBIOS")])]),t("li",[t("a",{attrs:{href:"#supported-hardware"}},[e._v("Supported hardware")])]),t("li",[t("a",{attrs:{href:"#up-to-date-kexts-bootloader-and-config-plist"}},[e._v("Up-to-date kexts, bootloader and config.plist")])]),t("li",[t("a",{attrs:{href:"#known-issues"}},[e._v("Known issues")])])])]),t("li",[t("a",{attrs:{href:"#installation"}},[e._v("Installation")])]),t("li",[t("a",{attrs:{href:"#troubleshooting"}},[e._v("Troubleshooting")]),t("ul",[t("li",[t("a",{attrs:{href:"#stuck-at-forcing-cs-runtime-for-entitlement"}},[e._v("Stuck at Forcing CS_RUNTIME for entitlement")])]),t("li",[t("a",{attrs:{href:"#stuck-at-pci-configuration-begins-for-intel-s-x99-and-x299-boards"}},[e._v("Stuck at PCI Configuration Begins for Intel's X99 and X299 boards")])]),t("li",[t("a",{attrs:{href:"#stuck-on-ramrod"}},[e._v("Stuck on ramrod(^^^^^^^^^^^^^)")])]),t("li",[t("a",{attrs:{href:"#x79-and-x99-kernel-panic-on-iopcifamily"}},[e._v("X79 and X99 Kernel Panic on IOPCIFamily")])]),t("li",[t("a",{attrs:{href:"#deviceproperties-injection-failing"}},[e._v("DeviceProperties injection failing")])]),t("li",[t("a",{attrs:{href:"#keyboard-and-mouse-broken"}},[e._v("Keyboard and Mouse broken")])]),t("li",[t("a",{attrs:{href:"#early-kernel-panic-on-max-cpus-from-firmware-not-yet-initialized"}},[e._v("Early Kernel Panic on max_cpus_from_firmware not yet initialized")])]),t("li",[t("a",{attrs:{href:"#cannot-update-to-newer-versions-of-big-sur"}},[e._v("Cannot update to newer versions of Big Sur")])]),t("li",[t("a",{attrs:{href:"#kernel-panic-on-rooting-from-the-live-fs"}},[e._v("Kernel Panic on Rooting from the live fs")])]),t("li",[t("a",{attrs:{href:"#asus-z97-and-hedt-ie-x99-and-x299-failing-stage-2-installation"}},[e._v("Asus Z97 and HEDT(ie. X99 and X299) failing Stage 2 Installation")])]),t("li",[t("a",{attrs:{href:"#laptops-kernel-panicking-on-cannot-perform-kext-scan"}},[e._v("Laptops kernel panicking on cannot perform kext scan")])]),t("li",[t("a",{attrs:{href:"#reboot-on-appleusbhostport-createdevice-failed-to-create-device-on-macos-11-3"}},[e._v('Reboot on "AppleUSBHostPort::createDevice: failed to create device" on macOS 11.3+')])])])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"prerequisites"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),t("p",[e._v("Before we can jump head first into installing Big Sur, we need to go over a few things:")]),e._v(" "),t("h3",{attrs:{id:"a-supported-smbios"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#a-supported-smbios"}},[e._v("#")]),e._v(" A supported SMBIOS")]),e._v(" "),t("p",[e._v("Big Sur dropped a few Ivy Bridge and Haswell based SMBIOS from macOS, so see below that yours wasn't dropped:")]),e._v(" "),t("ul",[t("li",[e._v("iMac14,3 and older\n"),t("ul",[t("li",[e._v("Note iMac14,4 is still supported")])])]),e._v(" "),t("li",[e._v("MacPro5,1 and older")]),e._v(" "),t("li",[e._v("Macmini6,x and older")]),e._v(" "),t("li",[e._v("MacBook7,1 and older")]),e._v(" "),t("li",[e._v("MacBookAir5,x and older")]),e._v(" "),t("li",[e._v("MacBookPro10,x and older")])]),e._v(" "),t("p",[e._v("If your SMBIOS was supported in Catalina and isn't included above, you're good to go!")]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("Supported SMBIOS")]),e._v(" "),t("p",[e._v("SMBIOS still supported in macOS Big Sur:")]),e._v(" "),t("ul",[t("li",[e._v("iMac14,4 and newer")]),e._v(" "),t("li",[e._v("MacPro6,1 and newer")]),e._v(" "),t("li",[e._v("iMacPro1,1 and newer")]),e._v(" "),t("li",[e._v("Macmini7,1 and newer")]),e._v(" "),t("li",[e._v("MacBook8,1 and newer")]),e._v(" "),t("li",[e._v("MacBookAir6,x and newer")]),e._v(" "),t("li",[e._v("MacBookPro11,x and newer")])]),e._v(" "),t("p",[e._v("For full list of supported SMBIOS including OS support, see here: "),t("RouterLink",{attrs:{to:"/extras/smbios-support.html"}},[e._v("Choosing the right SMBIOS")])],1)]),e._v(" "),t("p",[e._v("For those wanting a simple translation for their Machines:")]),e._v(" "),t("ul",[t("li",[e._v("iMac13,1 should transition over to using iMac14,4")]),e._v(" "),t("li",[e._v("iMac13,2 should transition over to using iMac15,1")]),e._v(" "),t("li",[e._v("iMac14,2 and iMac14,3 should transition over to using iMac15,1\n"),t("ul",[t("li",[e._v("Note: AMD CPU users with NVIDIA GPUs may find MacPro7,1 more suitable")])])]),e._v(" "),t("li",[e._v("iMac14,1 should transition over to iMac14,4")])]),e._v(" "),t("h3",{attrs:{id:"supported-hardware"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#supported-hardware"}},[e._v("#")]),e._v(" Supported hardware")]),e._v(" "),t("p",[e._v("Not much hardware has been dropped, though the few that have:")]),e._v(" "),t("ul",[t("li",[e._v("Official Ivy Bridge U, H and S CPUs.\n"),t("ul",[t("li",[e._v("These CPUs will still boot without much issue, but note that no Macs are supported with consumer Ivy Bridge in Big Sur.")]),e._v(" "),t("li",[e._v("Ivy Bridge-E CPUs are still supported thanks to being in MacPro6,1")])])]),e._v(" "),t("li",[e._v("Ivy Bridge iGPUs slated for removal\n"),t("ul",[t("li",[e._v("HD 4000 and HD 2500, however currently these drivers are still present in 11.0.1")])])]),e._v(" "),t("li",[e._v("BCM4331 and BCM43224 based WiFi cards.\n"),t("ul",[t("li",[e._v("See "),t("a",{attrs:{href:"https://sumingyd.github.io/Wireless-Buyers-Guide/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Wireless Buyers guide"),t("OutboundLink")],1),e._v(" for potential cards to upgrade to.")]),e._v(" "),t("li",[e._v("Potential work-around is to inject a patched IO80211Family, see here for more details: "),t("a",{attrs:{href:"https://github.com/khronokernel/IO80211-Patches",target:"_blank",rel:"noopener noreferrer"}},[e._v("IO80211 Patches"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("Certain SATA controllers dropped\n"),t("ul",[t("li",[e._v("For some reason, Apple removed the AppleIntelPchSeriesAHCI class from AppleAHCIPort.kext. Due to the outright removal of the class, trying to spoof to another ID (generally done by SATA-unsupported.kext) can fail for many and create instability for others.")]),e._v(" "),t("li",[e._v("A partial fix is to inject Catalina's version with any conflicting symbols being patched. You can find a sample kext here: "),t("a",{attrs:{href:"https://github.com/dortania/OpenCore-Install-Guide/blob/master/extra-files/CtlnaAHCIPort.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("Catalina's patched AppleAHCIPort.kext"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("We recommend setting the MinKernel value to 20.0.0 for the kext "),t("code",[e._v("CtlnaAHCIPort.kext")]),e._v(" to avoid any potential conflicts. This way, it will work in both Catalina and Big Sur so you can remove SATA-unsupported if you want.")])])])]),e._v(" "),t("p",[e._v("Other notable changes:")]),e._v(" "),t("ul",[t("li",[e._v("MSI Navi users no longer require the "),t("code",[e._v("ATY,rom")]),e._v("/"),t("code",[e._v("-wegnoegpu")]),e._v(" patch to boot the installer")]),e._v(" "),t("li",[e._v("Stage 2 installation requiring working NVRAM\n"),t("ul",[t("li",[e._v("Asus 9 series: For more info, see here: "),t("a",{attrs:{href:"https://www.reddit.com/r/hackintosh/comments/jw7qf1/haswell_asus_z97_big_sur_update_and_installation/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Haswell ASUS Z97 Big Sur Update Thread"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("X99 and X299 users with broken NVRAM will need to install on another machine and move the SSD when done")])])])]),e._v(" "),t("h3",{attrs:{id:"up-to-date-kexts-bootloader-and-config-plist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#up-to-date-kexts-bootloader-and-config-plist"}},[e._v("#")]),e._v(" Up-to-date kexts, bootloader and config.plist")]),e._v(" "),t("p",[e._v("Ensure that you have the latest version of OpenCore, kexts and config.plist so it won't have any odd compatibility issues. You can simply download and update OpenCore and kexts as mentioned here:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://sumingyd.github.io/OpenCore-Post-Install/universal/update.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Updating OpenCore and macOS"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("If you're unsure what version of OpenCore you're using, you can run the following in terminal:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[e._v("nvram 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:opencore-version\n")])])]),t("ul",[t("li",[e._v("Note: The about command will require you to include bit "),t("code",[e._v("0x2")]),e._v(" in "),t("code",[e._v("Misc -> Security -> ExposeSensitiveData")]),e._v(", recommended values for ExposeSensitiveData is "),t("code",[e._v("0x6")]),e._v(" which includes bits "),t("code",[e._v("0x2")]),e._v(" and "),t("code",[e._v("0x4")]),e._v(".")])]),e._v(" "),t("h4",{attrs:{id:"amd-note"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#amd-note"}},[e._v("#")]),e._v(" AMD Note")]),e._v(" "),t("p",[t("strong",[e._v("Reminder for AMD Users")]),e._v(": Don't forget to update your kernel patches with those provided by AMD OS X, otherwise you'll be unable to boot Big Sur:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/AMD-OSX/AMD_Vanilla/",target:"_blank",rel:"noopener noreferrer"}},[e._v("AMD OSX Patches"),t("OutboundLink")],1)])]),e._v(" "),t("h4",{attrs:{id:"intel-hedt-note"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#intel-hedt-note"}},[e._v("#")]),e._v(" Intel HEDT Note")]),e._v(" "),t("p",[e._v("For X79, X99 and X299 users, pay close attention to the below. Big Sur has added new requirements for ACPI, so you'll need to grab some new SSDTs:")]),e._v(" "),t("ul",[t("li",[e._v("X79\n"),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-UNC.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-UNC"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("X99\n"),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-UNC.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-UNC"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-RTC0-RANGE.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-RTC0-RANGE"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("X299\n"),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-RTC0-RANGE.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-RTC0-RANGE"),t("OutboundLink")],1)])])])]),e._v(" "),t("p",[e._v("For those who'd like precompiled files, see here:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://sumingyd.github.io/Getting-Started-With-ACPI/ssdt-methods/ssdt-prebuilt.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Getting started with ACPI: Prebuilt SSDTs"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"known-issues"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#known-issues"}},[e._v("#")]),e._v(" Known issues")]),e._v(" "),t("p",[e._v("With Big Sur, quite a bit broke. Mainly the following:")]),e._v(" "),t("ul",[t("li",[e._v("Lilu\n"),t("ul",[t("li",[e._v("Mainly user-space patching has severely broke, meaning certain functionality may have broken")]),e._v(" "),t("li",[e._v("These include:\n"),t("ul",[t("li",[e._v("DiskArbitrationFixup")]),e._v(" "),t("li",[e._v("MacProMemoryNotificationDisabler")]),e._v(" "),t("li",[e._v("SidecarEnabler")]),e._v(" "),t("li",[e._v("SystemProfilerMemoryFixup")]),e._v(" "),t("li",[e._v("NoTouchID")]),e._v(" "),t("li",[e._v("WhateverGreen's DRM and -cdfon patches")])])])])]),e._v(" "),t("li",[e._v("AirportBrcmFixup\n"),t("ul",[t("li",[e._v("Forcing a specific driver to load with "),t("code",[e._v("brcmfx-driver=")]),e._v(" may help\n"),t("ul",[t("li",[e._v("BCM94352Z users for example may need "),t("code",[e._v("brcmfx-driver=2")]),e._v(" in boot-args to resolve this, other chipsets will need other variables.")])])]),e._v(" "),t("li",[e._v("Setting MaxKernel to 19.9.9 for AirPortBrcm4360_Injector.kext may help. More information "),t("a",{attrs:{href:"https://github.com/acidanthera/AirportBrcmFixup/blob/master/README.md#please-pay-attention",target:"_blank",rel:"noopener noreferrer"}},[e._v("from the repo"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("SATA Support broken\n"),t("ul",[t("li",[e._v("Due to Apple dropping the AppleIntelPchSeriesAHCI class in AppleAHCIPort.kext")]),e._v(" "),t("li",[e._v("To resolve, add "),t("a",{attrs:{href:"https://github.com/dortania/OpenCore-Install-Guide/blob/master/extra-files/CtlnaAHCIPort.kext.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("Catalina's patched AppleAHCIPort.kext"),t("OutboundLink")],1),e._v(" with the MinKernel set to 20.0.0")])])]),e._v(" "),t("li",[e._v("XhciPortLimit broken in macOS 11.3 Beta 2 and newer\n"),t("ul",[t("li",[e._v("With macOS 11.3 and newer, "),t("a",{attrs:{href:"https://github.com/dortania/bugtracker/issues/162",target:"_blank",rel:"noopener noreferrer"}},[e._v("XhciPortLimit is broken resulting in boot loops"),t("OutboundLink")],1),e._v(". We advise users either install an older OS(ie. macOS 10.15, Catalina) or find a 11.2.3 or older Big Sur installer\n"),t("ul",[t("li",[e._v("For education purposes, we have a copy provided here: "),t("a",{attrs:{href:"https://archive.org/details/install-mac-os-11.2.3-20-d-91",target:"_blank",rel:"noopener noreferrer"}},[e._v("macOS 11.2.3 InstallAssistant(macOS)"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("If you've already "),t("a",{attrs:{href:"https://sumingyd.github.io/OpenCore-Post-Install/usb/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mapped your USB ports"),t("OutboundLink")],1),e._v(" and disabled "),t("code",[e._v("XhciPortLimit")]),e._v(", you can boot macOS 11.3+ without issue")])])])])])]),e._v(" "),t("p",[e._v("And while not an issue, SIP has now gained a new bit so to properly disable SIP you need to set "),t("code",[e._v("csr-active-config")]),e._v(" to "),t("code",[e._v("FF0F0000")]),e._v(". See here for more info: "),t("RouterLink",{attrs:{to:"/troubleshooting/extended/post-issues.html#disabling-sip"}},[e._v("Disabling SIP")])],1),e._v(" "),t("h2",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),t("p",[e._v("Guides have been updated to accommodate Big Sur, see the applicable OS environment for you:")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/installer-guide/mac-install.html"}},[e._v("macOS users")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/installer-guide/windows-install.html"}},[e._v("Windows users")])],1),e._v(" "),t("li",[t("RouterLink",{attrs:{to:"/installer-guide/linux-install.html"}},[e._v("Linux users")])],1)]),e._v(" "),t("h2",{attrs:{id:"troubleshooting"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),t("h3",{attrs:{id:"stuck-at-forcing-cs-runtime-for-entitlement"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stuck-at-forcing-cs-runtime-for-entitlement"}},[e._v("#")]),e._v(" Stuck at "),t("code",[e._v("Forcing CS_RUNTIME for entitlement")])]),e._v(" "),t("p",[t("img",{attrs:{src:a(275),alt:"Credit to Stompy for image"}})]),e._v(" "),t("p",[e._v("This is actually the part at where macOS will seal the system volume, and where it may seem that macOS has gotten stuck. "),t("strong",[e._v("DO NOT RESTART")]),e._v(" thinking you're stuck, this will take quite some time to complete, otherwise you'll break your installation.")]),e._v(" "),t("h3",{attrs:{id:"stuck-at-pci-configuration-begins-for-intel-s-x99-and-x299-boards"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stuck-at-pci-configuration-begins-for-intel-s-x99-and-x299-boards"}},[e._v("#")]),e._v(" Stuck at "),t("code",[e._v("PCI Configuration Begins")]),e._v(" for Intel's X99 and X299 boards")]),e._v(" "),t("p",[t("img",{attrs:{src:a(384),alt:""}})]),e._v(" "),t("p",[e._v("As previously mentioned, Intel HEDT motherboards may have some issues revolving around their RTC device in ACPI. To resolve, you'll need to look at your RTC device and see which regions are missing. For more information, see here: "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-RTC0-RANGE.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-RTC0-RANGE.dsl"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"stuck-on-ramrod"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stuck-on-ramrod"}},[e._v("#")]),e._v(" Stuck on "),t("code",[e._v("ramrod")]),e._v("(^^^^^^^^^^^^^)")]),e._v(" "),t("p",[t("img",{attrs:{src:a(276),alt:"Credit to Notiflux for image"}})]),e._v(" "),t("p",[e._v("If you get stuck around the "),t("code",[e._v("ramrod")]),e._v(" section (specifically, it boots, hits this error, and reboots again back into this, causing a loop), this hints that your SMC emulator is broken. To fix this, you have 2 options:")]),e._v(" "),t("ul",[t("li",[e._v("Ensure you're using the latest builds of VirtualSMC and Lilu, with the "),t("code",[e._v("vsmcgen=1")]),e._v(" boot-arg")]),e._v(" "),t("li",[e._v("Switch over to "),t("a",{attrs:{href:"https://bitbucket.org/RehabMan/os-x-fakesmc-kozlek/downloads/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rehabman's FakeSMC"),t("OutboundLink")],1),e._v(" (you can use the "),t("code",[e._v("MinKernel")]),e._v("/"),t("code",[e._v("MaxKernel")]),e._v(" trick mentioned above to restrict FakeSMC to Big Sur and up)")])]),e._v(" "),t("p",[e._v("And when switching kexts, ensure you don't have both FakeSMC and VirtualSMC enabled in your config.plist, as this will cause a conflict.")]),e._v(" "),t("h3",{attrs:{id:"x79-and-x99-kernel-panic-on-iopcifamily"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x79-and-x99-kernel-panic-on-iopcifamily"}},[e._v("#")]),e._v(" X79 and X99 Kernel Panic on IOPCIFamily")]),e._v(" "),t("p",[e._v("This is due to an unused uncore PCI Bridges being enabled in ACPI, and so IOPCIFamily will kernel panic when probing unknown devices. To resolve, you'll need to add "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-UNC.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-UNC"),t("OutboundLink")],1),e._v(" to your system")]),e._v(" "),t("h3",{attrs:{id:"deviceproperties-injection-failing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deviceproperties-injection-failing"}},[e._v("#")]),e._v(" DeviceProperties injection failing")]),e._v(" "),t("p",[e._v("With Big Sur, macOS has become much pickier with devices being present in ACPI. Especially if you're injecting important properties for WhateverGreen or AppleALC, you may find they're no longer applying. To verify whether your ACPI defines your hardware, check for the "),t("code",[e._v("acpi-path")]),e._v(" property in "),t("a",{attrs:{href:"https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-210.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("IORegistryExplorer"),t("OutboundLink")],1),e._v(":")]),e._v(" "),t("p",[t("img",{attrs:{src:a(385),alt:""}})]),e._v(" "),t("p",[e._v("If no property is found, you'll need to create an SSDT that provides the full pathing as you likely have a PCI Bridge that is not documented in your ACPI tables. An example of this can be found here: "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/tree/master/Docs/AcpiSamples/Source/SSDT-BRG0.dsl",target:"_blank",rel:"noopener noreferrer"}},[e._v("SSDT-BRG0"),t("OutboundLink")],1)]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Note")]),e._v(": This issue may also pop up in older versions of macOS, however Big Sur is most likely to have issues.")])]),e._v(" "),t("h3",{attrs:{id:"keyboard-and-mouse-broken"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keyboard-and-mouse-broken"}},[e._v("#")]),e._v(" Keyboard and Mouse broken")]),e._v(" "),t("p",[e._v("For certain legacy systems, you may notice that while the USB ports work your HID-based devices such as the keyboard and mouse may be broken. To resolve this, add the following patch:")]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("IOHIDFamily Patch")]),e._v(" "),t("p",[e._v("config.plist -> Kernel -> Patch:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Key")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Type")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Base")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("_isSingleUser")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Count")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("1")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Enabled")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Boolean")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("True")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Find")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Identifier")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("com.apple.iokit.IOHIDFamily")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Limit")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("0")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Mask")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("MaxKernel")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("MinKernel")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("20.0.0")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Replace")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("B801000000C3")])])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("ReplaceMask")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Skip")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("0")])])])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://applelife.ru/threads/ustanovka-macos-big-sur-11-0-beta-na-intel-pc-old.2944999/page-81#post-884400",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"early-kernel-panic-on-max-cpus-from-firmware-not-yet-initialized"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#early-kernel-panic-on-max-cpus-from-firmware-not-yet-initialized"}},[e._v("#")]),e._v(" Early Kernel Panic on "),t("code",[e._v("max_cpus_from_firmware not yet initialized")])]),e._v(" "),t("p",[e._v("If you receive an early kernel panic on "),t("code",[e._v("max_cpus_from_firmware not yet initialized")]),e._v(", this is due to the new "),t("code",[e._v("acpi_count_enabled_logical_processors")]),e._v(" method added in macOS Big Sur's kernel. To resolve, please ensure you're on OpenCore 0.6.0 or newer with the "),t("code",[e._v("AvoidRuntimeDefrag")]),e._v(" Quirk enabled.")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("Note")]),e._v(": Due to how early this kernel panic happens, you may only be able to log it either via serial or rebooting in a known working install of macOS and checking your panic logged in NVRAM.\n"),t("ul",[t("li",[e._v("Most users will see this panic simply as "),t("code",[e._v("[EB|#LOG:EXITBS:START]")])])])])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("Example Kernel Panic")]),e._v(" "),t("p",[e._v("On-screen:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(386),alt:""}})]),e._v(" "),t("p",[e._v("Via serial logging or NVRAM:")]),e._v(" "),t("p",[t("img",{attrs:{src:a(387),alt:""}})])]),e._v(" "),t("details",{staticClass:"custom-block details"},[t("summary",[e._v("Legacy Edge Case")]),e._v(" "),t("p",[e._v("On certain hardware, mainly the HP DC7900, the kernel still can't determine exactly how many threads your hardware supports. This will result in the aforementioned kernel panic and so we need to hard code the CPU core's value.")]),e._v(" "),t("p",[e._v("To do this, Add the following patch(replacing the 04 from B8 "),t("strong",[e._v("04")]),e._v(" 00 00 00 C3 with the amount of CPU threads your hardware supports):")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Key")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Type")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Value")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Base")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("_acpi_count_enabled_logical_processors")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Count")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("1")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Enabled")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Boolean")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("True")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Find")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Identifier")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Kernel")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Limit")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("0")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Mask")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("MaxKernel")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("MinKernel")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("20.0.0")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Replace")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[t("code",[e._v("B804000000C3")])])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("ReplaceMask")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Data")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}})]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("Skip")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Integer")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("0")])])])])]),e._v(" "),t("h3",{attrs:{id:"cannot-update-to-newer-versions-of-big-sur"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cannot-update-to-newer-versions-of-big-sur"}},[e._v("#")]),e._v(" Cannot update to newer versions of Big Sur")]),e._v(" "),t("p",[e._v("Generally there's 2 main culprits:")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#broken-update-utility"}},[e._v("Broken Update Utility")]),e._v(" "),t("ul",[t("li",[e._v("Most common error if running a beta, try this first")])])]),e._v(" "),t("li",[t("a",{attrs:{href:"#broken-seal"}},[e._v("Broken Seal")])])]),e._v(" "),t("h4",{attrs:{id:"broken-update-utility"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broken-update-utility"}},[e._v("#")]),e._v(" Broken Update Utility")]),e._v(" "),t("p",[e._v("Generally seen with every beta cycle, simply unenroll and enroll again:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Unenroll from beta catalog")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" /System/Library/PrivateFrameworks/Seeding.framework/Resources/seedutil unenroll\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Enroll back in")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" /System/Library/PrivateFrameworks/Seeding.framework/Resources/seedutil enroll DeveloperSeed\n")])])]),t("p",[e._v("Then check back with settings, and it should pop up. If not, run the following:")]),e._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# List software updates via terminal")]),e._v("\nsoftwareupdate "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-l")]),e._v("\n")])])]),t("p",[e._v("This should help kick the update utility back into gear. If you still have issues, check the "),t("a",{attrs:{href:"#broken-seal"}},[e._v("Broken Seal")]),e._v(" section.")]),e._v(" "),t("h4",{attrs:{id:"broken-seal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broken-seal"}},[e._v("#")]),e._v(" Broken Seal")]),e._v(" "),t("p",[e._v("With Apple's new snapshotting for the system drive, they now depend heavily on this for OS updates to apply correctly. So when a drove's seal is broken, macOS will refuse to update the drive.")]),e._v(" "),t("p",[e._v("To verify yourself, check that "),t("code",[e._v("Snapshot Sealed")]),e._v(" returns as YES:")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# List all APFS volumes")]),e._v("\ndiskutil apfs list\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Look for your system volume")]),e._v("\nVolume disk1s8 A604D636-3C54-4CAA-9A31-5E1A460DC5C0\n        ---------------------------------------------------\n        APFS Volume Disk "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Role"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(":   disk1s8 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("System"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n        Name:                      Big Sur HD "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Case-insensitive"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n        Mount Point:               Not Mounted\n        Capacity Consumed:         "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("15113809920")]),e._v(" B "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("15.1")]),e._v(" GB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n        Sealed:                    Broken\n        FileVault:                 No\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v("\n        Snapshot:                  4202EBE5-288B-4701-BA1E-B6EC8AD6397D\n        Snapshot Disk:             disk1s8s1\n        Snapshot Mount Point:      /\n        Snapshot Sealed:           Yes\n")])])]),t("p",[e._v("If it returns "),t("code",[e._v("Snapshot Sealed: Broken")]),e._v(", then you'll want to go through the following:")]),e._v(" "),t("ul",[t("li",[e._v("Update to OpenCore 0.6.4 or newer\n"),t("ul",[t("li",[e._v("Specifically commit "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/commit/1b0041493d4693f9505aa6415d93079ea59f7ab0",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("ba10b5d")]),t("OutboundLink")],1),e._v(" or newer is required")])])]),e._v(" "),t("li",[e._v("Revert to older snapshots\n"),t("ul",[t("li",[e._v("Mainly for those who have tampered with the system volume")]),e._v(" "),t("li",[e._v("See here how to revert: "),t("RouterLink",{attrs:{to:"/troubleshooting/extended/post-issues.html#rolling-back-apfs-snapshot"}},[e._v("Rolling back APFS Snapshots")])],1)])])]),e._v(" "),t("h3",{attrs:{id:"kernel-panic-on-rooting-from-the-live-fs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kernel-panic-on-rooting-from-the-live-fs"}},[e._v("#")]),e._v(" Kernel Panic on "),t("code",[e._v("Rooting from the live fs")])]),e._v(" "),t("p",[e._v("Full error:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Rooting from the live fs of a sealed volume is not allowed on a RELEASE build\n")])])]),t("p",[e._v("This is due to issues around Secure Boot boot being enabled in Beta 10 with older versions of OpenCore. Simply update to 0.6.4 to resolve")]),e._v(" "),t("ul",[t("li",[e._v("Specifically commit "),t("a",{attrs:{href:"https://github.com/acidanthera/OpenCorePkg/commit/1b0041493d4693f9505aa6415d93079ea59f7ab0",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("ba10b5d")]),t("OutboundLink")],1),e._v(" or newer is required")])]),e._v(" "),t("h3",{attrs:{id:"asus-z97-and-hedt-ie-x99-and-x299-failing-stage-2-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#asus-z97-and-hedt-ie-x99-and-x299-failing-stage-2-installation"}},[e._v("#")]),e._v(" Asus Z97 and HEDT(ie. X99 and X299) failing Stage 2 Installation")]),e._v(" "),t("p",[e._v("With Big Sur, there's a higher reliance on native NVRAM for installation otherwise the installer will get stuck in a reboot loop. To resolve this you'll need to either:")]),e._v(" "),t("ul",[t("li",[e._v("Install Big Sur on another machine, then transfer the drive")]),e._v(" "),t("li",[e._v("Fix the motherboard's NVRAM\n"),t("ul",[t("li",[e._v("mainly applicable with Asus's Z97 series")])])])]),e._v(" "),t("p",[e._v("For the latter, see here: "),t("a",{attrs:{href:"https://www.reddit.com/r/hackintosh/comments/jw7qf1/haswell_asus_z97_big_sur_update_and_installation/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Haswell ASUS Z97 Big Sur Update Thread"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"laptops-kernel-panicking-on-cannot-perform-kext-scan"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#laptops-kernel-panicking-on-cannot-perform-kext-scan"}},[e._v("#")]),e._v(" Laptops kernel panicking on "),t("code",[e._v("cannot perform kext scan")])]),e._v(" "),t("p",[e._v("This is due to multiple copies of the same kext being in your kernel cache, and to be more specific having multiple copies of VoodooInput. Look over your "),t("code",[e._v("Kernel -> Add")]),e._v(" and verify you only have 1 copy of VoodooInput enabled.")]),e._v(" "),t("ul",[t("li",[e._v("Note: Both VoodooI2C and VoodooPS2 have a bundled copy of VoodooInput, which you disable is up to personal preference")])]),e._v(" "),t("h3",{attrs:{id:"reboot-on-appleusbhostport-createdevice-failed-to-create-device-on-macos-11-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reboot-on-appleusbhostport-createdevice-failed-to-create-device-on-macos-11-3"}},[e._v("#")]),e._v(' Reboot on "AppleUSBHostPort::createDevice: failed to create device" on macOS 11.3+')]),e._v(" "),t("p",[e._v("This is due to "),t("a",{attrs:{href:"https://github.com/dortania/bugtracker/issues/162",target:"_blank",rel:"noopener noreferrer"}},[e._v("XhciPortLimit breaking with macOS 11.3 and newer"),t("OutboundLink")],1),e._v(", to resolve you "),t("strong",[e._v("must")]),e._v(" disable XhciPortLimit under Kernel -> Quirks. Please ensure you've "),t("a",{attrs:{href:"https://sumingyd.github.io/OpenCore-Post-Install/usb/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mapped your USB ports correctly"),t("OutboundLink")],1),e._v(" before doing so.")])])}),[],!1,null,null,null);t.default=i.exports}}]);